# マルチECサイト検索アプリケーション

複数のオンラインショッピングサイトを横断検索し、商品情報を統合表示するWebアプリケーション

## 概要

このアプリケーションは、Amazon Japan、楽天市場、Yahoo!ショッピング、淘宝の4つの主要ECサイトから商品を検索し、統合された結果を表示します。価格比較、評価比較、価格推移の確認など、オンラインショッピングをより効率的に行うための機能を提供します。

## スクリーンショット

### ライトモード
![ライトモード](https://raw.githubusercontent.com/masatamo-aws/kiro-multi-ecommerce-search/main/assets/images/Light%20Mode.png)
*明るく見やすいライトテーマでの表示*

### ダークモード
![ダークモード](https://raw.githubusercontent.com/masatamo-aws/kiro-multi-ecommerce-search/main/assets/images/Dark%20Mode.png)
*目に優しいダークテーマでの表示*

## 主な機能

### 🔍 マルチサイト検索
- Amazon Japan (amazon.co.jp)
- 楽天市場 (rakuten.co.jp)
- Yahoo!ショッピング (shopping.yahoo.co.jp)
- 淘宝 (taobao.com)

### 📊 多様なソート機能
- 価格順（安い順・高い順）
- 評価順（高い順・低い順）
- 評価数順（多い順・少ない順）
- 出品者評価順（高い順・低い順）
- 価格変動順（最近安くなった順）

### 📈 価格推移表示
- 過去6ヶ月の価格変動グラフ
- Amazon商品のKeepa連携
- 価格トレンド分析

### 🎨 テーマ切り替え
- ライトモード
- ダークモード
- 設定の自動保存

### 🔗 検索結果共有
- 共有リンクの生成
- 検索キーワードと結果の保存
- ダイレクトリンク付き

### ⭐ レビュー表示
- 商品レビューの統合表示
- 人気順・評価順でのソート
- レビュー詳細表示

## 技術スタック

- **Frontend**: HTML5, CSS3, Vanilla JavaScript
- **UI Framework**: Bootstrap 5
- **Charts**: Chart.js
- **Icons**: Font Awesome
- **Storage**: LocalStorage

## ファイル構成

```
kiro-multi-ecommerce-search/
├── index.html              # メインページ
├── css/
│   ├── styles.css         # メインスタイル
│   └── themes.css         # テーマ定義
├── js/
│   ├── app.js            # メインアプリケーション
│   ├── api-client.js     # API連携クライアント
│   ├── config.js         # 設定管理
│   ├── search.js         # 検索機能
│   ├── sort.js           # ソート機能
│   ├── theme.js          # テーマ切り替え
│   ├── share.js          # 共有機能
│   └── reviews.js        # レビュー・価格推移機能
├── data/
│   └── mock-data.js      # モックデータ
├── assets/
│   └── images/           # スクリーンショット・画像ファイル
│       ├── Light Mode.png # ライトモードのスクリーンショット
│       └── Dark Mode.png  # ダークモードのスクリーンショット
└── .env.example          # 環境変数設定例
```

## セットアップ

### 基本セットアップ
1. リポジトリをクローンまたはダウンロード
2. Webサーバーでindex.htmlを開く（ローカルファイルでも動作）
3. 検索キーワードを入力して検索開始

### API連携セットアップ（オプション）
実際のECサイトからデータを取得するには、以下の手順でAPIキーを設定してください：

1. **楽天ウェブサービス**
   - [楽天ウェブサービス](https://webservice.rakuten.co.jp/)でアカウント作成
   - アプリケーションIDを取得

2. **Yahoo!ショッピングAPI**
   - [Yahoo!デベロッパーネットワーク](https://developer.yahoo.co.jp/)でアカウント作成
   - Client IDを取得

3. **Amazon アソシエイト（オプション）**
   - [Amazonアソシエイト](https://affiliate.amazon.co.jp/)でアカウント作成
   - アソシエイトタグを取得（収益化時のみ必要）

4. **設定方法**
   - アプリケーション右上の「設定」ボタンをクリック
   - 取得したAPIキー・アソシエイトタグを入力
   - 「設定を保存」をクリック

### 注意事項
- APIキーなしでもモックデータで全機能をテスト可能
- 実際のAPI使用時は各サービスの利用規約を確認
- CORS制限により、一部のAPIは制限される場合があります

## 使用方法

### 基本的な検索
1. 検索ボックスにキーワードを入力
2. 「検索」ボタンをクリック
3. 各ECサイトからの結果が統合表示されます

### ソート機能
- 検索結果上部のソートドロップダウンから希望の並び順を選択

### 価格推移の確認
- 商品カードの「価格推移」ボタンをクリック
- グラフで過去6ヶ月の価格変動を確認

### テーマ切り替え
- ヘッダーのテーマ切り替えボタンでライト/ダークモードを選択

### 検索結果の共有
- 「共有」ボタンをクリックして共有リンクを生成
- リンクをコピーして他の人と共有

## 対応ブラウザ

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 開発情報

### 開発環境
- Node.js不要（純粋なHTML/CSS/JavaScript）
- モダンブラウザでの動作を前提

### アーキテクチャ
システムの詳細な論理アーキテクチャについては、[論理アーキテクチャドキュメント](logicalarchitecture.md)を参照してください。

### カスタマイズ
- `css/themes.css`でテーマをカスタマイズ可能
- `data/mock-data.js`でテストデータを変更可能
- 各JSファイルで機能を個別に拡張可能

## ライセンス

MIT License

## 貢献

プルリクエストやイシューの報告を歓迎します。

## サポート

質問や問題がある場合は、GitHubのIssuesページでお知らせください。

---

## API対応状況

| ECサイト | API対応 | 必要な設定 | 状態 | 備考 |
|---------|---------|------------|------|------|
| Amazon Japan | 部分対応 | アソシエイトタグ(オプション) | スクレイピング | 公式APIは制限が厳しい |
| 楽天市場 | 完全対応 | APIキー必要 | 公式API | 楽天ウェブサービス |
| Yahoo!ショッピング | 完全対応 | APIキー必要 | 公式API | Yahoo!デベロッパーAPI |
| 淘宝 | 部分対応 | なし | スクレイピング | 公式APIは中国企業のみ |

## 各ECサイトのAPI詳細説明

### 🛒 Amazon Japan
**現在の実装方式**: スクレイピング

Amazon は公式の Product Advertising API を提供していますが、以下の理由により本アプリケーションではスクレイピング方式を採用しています：

- **API承認の困難さ**: Amazon PA-API は非常に厳格な審査があり、個人開発者や小規模アプリケーションでは承認が困難
- **売上要件**: API利用継続には一定期間内の売上実績が必要
- **制限事項**: 1日あたりのリクエスト数に厳しい制限

**設定項目**:
- **Amazonアソシエイトタグ** (オプション): 商品リンクから収益を得る場合のみ必要
- 取得方法: [Amazonアソシエイト](https://affiliate.amazon.co.jp/)でアカウント作成

**注意事項**:
- スクレイピングはAmazonの利用規約に抵触する可能性があります
- 商用利用時は必ずAmazonの利用規約を確認してください
- CORS制限により、ブラウザから直接アクセスできない場合があります

### 🛍️ 楽天市場
**現在の実装方式**: 公式API（楽天ウェブサービス）

楽天市場は開発者フレンドリーな公式APIを提供しており、無料で利用可能です：

- **API名**: 楽天市場商品検索API
- **利用料金**: 無料
- **リクエスト制限**: 1秒間に1回まで
- **データ品質**: 高品質（公式データ）

**設定項目**:
- **APIキー** (必須): アプリケーションID
- 取得方法: [楽天ウェブサービス](https://webservice.rakuten.co.jp/)でアカウント作成

**取得手順**:
1. 楽天ウェブサービスにアクセス
2. 楽天会員でログイン
3. 「アプリID発行」から新規アプリケーションを登録
4. 発行されたアプリケーションIDを設定画面に入力

### 🛒 Yahoo!ショッピング
**現在の実装方式**: 公式API（Yahoo!ショッピングAPI）

Yahoo!ショッピングも開発者向けの公式APIを提供しています：

- **API名**: Yahoo!ショッピング商品検索API
- **利用料金**: 無料
- **リクエスト制限**: 1日50,000回まで
- **データ品質**: 高品質（公式データ）

**設定項目**:
- **APIキー** (必須): Client ID
- 取得方法: [Yahoo!デベロッパーネットワーク](https://developer.yahoo.co.jp/)でアカウント作成

**取得手順**:
1. Yahoo!デベロッパーネットワークにアクセス
2. Yahoo! JAPAN IDでログイン
3. 「アプリケーションの管理」から新規アプリケーションを作成
4. 発行されたClient IDを設定画面に入力

### 🛍️ 淘宝 (Taobao)
**現在の実装方式**: スクレイピング

淘宝（タオバオ）は中国最大のECサイトですが、API利用には制限があります：

- **公式API**: 存在するが、中国国内の企業のみ利用可能
- **海外からのアクセス**: 基本的に公式APIは利用不可
- **言語**: 中国語のみ

**現在の制限事項**:
- スクレイピング方式のため、サイト構造変更により機能停止の可能性
- CORS制限により、ブラウザから直接アクセスできない場合が多い
- 中国のネットワーク規制により、アクセスが不安定な場合がある

**設定項目**: なし（APIキー不要）

## API利用時の注意事項

### 🔒 セキュリティ
- **APIキーの管理**: APIキーは秘密情報です。GitHubなどの公開リポジトリにコミットしないでください
- **ローカルストレージ**: APIキーはブラウザのローカルストレージに保存されます
- **HTTPS必須**: 本番環境では必ずHTTPS接続を使用してください

### 📊 パフォーマンス
- **レート制限**: 各APIには呼び出し回数制限があります
- **キャッシュ機能**: 同じ検索結果は一定時間キャッシュされます
- **並行処理**: 複数のAPIを並行して呼び出すため、応答時間が改善されます

### ⚖️ 法的事項
- **利用規約**: 各ECサイトの利用規約を必ず確認してください
- **商用利用**: 商用利用時は追加の許可が必要な場合があります
- **データ使用**: 取得したデータの二次利用には制限がある場合があります

### 🛠️ トラブルシューティング
- **API接続エラー**: 設定画面の「接続テスト」で各APIの状態を確認
- **CORS エラー**: プロキシサーバーの設定を確認
- **データが表示されない**: ブラウザの開発者ツールでエラーログを確認

**注意**: 
- APIキーが設定されていない場合は、モックデータが使用されます
- スクレイピング機能はCORS制限により制限される場合があります
- 商用利用時は各サイトの利用規約を必ず確認してください